<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ArcanaGate</title>

    <!-- Link to external CSS file -->
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body>

    <!-- Header with logo and navigation -->
    <header>
        <div class="logo">ArcanaGate</div>
        <nav>
            <a href="/">Home</a>
            <a href="/realms">Realms</a>
            <a href="/codex">Codex</a>
            <a href="/tavern">Tavern</a>

            <!-- Show Login/Register or Logout depending on session -->
            {% if session.get('username') %}
            <a href="/logout">Logout</a>
            {% else %}
            <a href="/login">Login</a>
            <a href="/register">Register</a>
            {% endif %}
        </nav>
    </header>

    <!-- Main content area -->
    <main>
        <h1>Enter the ArcanaGate</h1>

        <!-- Welcome message or call to action based on login -->
        {% if session.get('username') %}
        <p>Welcome, <strong>{{ session['username'] }}</strong>! Your journey begins.</p>
        {% else %}
        <p><a class="btn" href="/register">Begin Your Journey</a></p>
        {% endif %}
        {% if session.get('username') %}
        <form method="POST" action="/comment">
            <textarea name="content" rows="4" cols="50" placeholder="Share your thoughts..." required></textarea><br>
            <button type="submit">Post Comment</button>
        </form>
        {% else %}
        <p><a href="/login">Log in</a> to post a comment.</p>
        {% endif %}

        <hr>

        <h2>Latest Comments</h2>
        {% for comment in comments %}
        <p><strong>{{ comment['user'] }}</strong> ({{ comment['created_at'] }}):<br>
            {{ comment['content'] }}</p>
        {% else %}
        <p>No comments yet.</p>
        {% endfor %}

    </main>

    <!-- Footer -->
    <footer>
        <p>&copy; 2025 ArcanaGate. All rights reserved.</p>
    </footer>

</body>

</html>